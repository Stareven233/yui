2022-04-21 10:47:34 evaluate.py[line:127] INFO YuiConfigDev(RANDOM_SEED=233, DATASET_DIR='D:/A日常/大学/毕业设计/dataset/maestro-v3.0.0_hdf5/', DATAMETA_NAME='maestro-v3.0.0_tinymp3.csv', WORKSPACE='D:/A日常/大学/毕业设计/code/yui/', MAX_INPUTS_LENGTH=512, MAX_TARGETS_LENGTH=1024, PROGRAM_GRANULARITY='flat', SAMPLE_RATE=16000, FRAME_SIZE=128, HOP_WIDTH=128, NUM_MEL_BINS=256, FFT_SIZE=2048, MEL_LO_HZ=20.0, MEL_HI_HZ=8000.0, PAD_ID=0, ENCODED_EOS_ID=1, ENCODED_UNK_ID=2, EXTRA_IDS=100, DECODED_EOS_ID=-1, DECODED_INVALID_ID=-2, STEPS_PER_SECOND=100, MAX_SHIFT_SECONDS=10, NUM_VELOCITY_BINS=127, CUDA=True, BATCH_SIZE=8, EXPECT_BATCH_SIZE=128, NUM_WORKERS=2, NUM_EPOCHS=1, TRAIN_ITERATION=600, LEARNING_RATE=0.001, OVERFIT_PATIENCE=8, MODEL_SUFFIX='_kaggle')
2022-04-21 10:47:34 evaluate.py[line:129] INFO Using GPU.
2022-04-21 10:47:34 evaluate.py[line:130] INFO GPU number: 1
2022-04-21 10:47:34 evaluate.py[line:149] INFO The model has 5,118,208 trainable parameters
2022-04-21 10:47:34 evaluate.py[line:155] INFO {'epoch': 2, 
'train_loss': [1.3141887243092083, 1.2110627709329127, 1.1565461473166965, 1.0994526177644728, 1.018694463372232, 0.963213595226407, 0.9126205612719059, 0.890573506716822, 0.8674457404762508, 0.8465246287733315, 0.8297918830811974, 0.8137192173302173, 0.795477375909686, 0.7841036961227659, 0.7713113086670643, 0.7593957691407595, 0.7524687358736984], 'eval_loss': [0.890573506716822, 0.7593957691407595]}
2022-04-21 10:47:35 evaluate.py[line:79] INFO -------eval starts-------
2022-04-21 10:49:27 evaluate.py[line:106] INFO -------eval exits-------
2022-04-21 10:49:27 evaluate.py[line:172] INFO eval finish, time=112.337s
2022-04-21 10:49:27 evaluate.py[line:180] INFO metrics={
'Invalid events': 2265.3333333333335,
'Dropped events': 0.0, 
'Onset precision': 0.1875, 
'Onset recall': 0.0189873417721519, 
'Onset F1': 0.034482758620689655, 
'Onset + offset precision': 0.15625, 
'Onset + offset recall': 0.015822784810126583, 
'Onset + offset F1': 0.02873563218390805, 
'Onset + velocity precision': 0.11458333333333333, 
'Onset + velocity recall': 0.011603375527426161, 
'Onset + velocity F1': 0.021072796934865898, 
'Onset + offset + velocity precision': 0.10416666666666667, 
'Onset + offset + velocity recall': 0.010548523206751054, 
'Onset + offset + velocity F1': 0.019157088122605363, 
'Frame Precision': 0.04956896551724138, 
'Frame Recall': 0.1263005780346821, 
'Frame F1': 0.0711958292603454, 
'Onset + offset precision (0.01)': 0.003472222222222222, 
'Onset + offset recall (0.01)': 0.0003516174402250351, 
'Onset + offset F1 (0.01)': 0.0006385696040868454, 
'Onset + offset precision (0.02)': 0.010416666666666666, 
'Onset + offset recall (0.02)': 0.0010548523206751054, 
'Onset + offset F1 (0.02)': 0.001915708812260536, 
'Onset + offset precision (0.05)': 0.05419303797468355, 
'Onset + offset recall (0.05)': 0.006107594936708861, 
'Onset + offset F1 (0.05)': 0.010773287191529686, 
'Onset + offset precision (0.1)': 0.08755274261603375, 
'Onset + offset recall (0.1)': 0.01010548523206751, 
'Onset + offset F1 (0.1)': 0.01771515675853829, 
'Onset + offset precision (0.2)': 0.14732770745428975, 
'Onset + offset recall (0.2)': 0.01739803094233474, 
'Onset + offset F1 (0.2)': 0.03032175668438182, 
'Onset + offset precision (0.5)': 0.2655151195499297, 
'Onset + offset recall (0.5)': 0.029422938540542305, 
'Onset + offset F1 (0.5)': 0.05081228800175778, 
'Invalid events [hist]': array([1702, 1977, 3117]), 
'Dropped events [hist]': array([0, 0, 0]), 
'Onset precision [hist]': array(0.1875), 
'Onset recall [hist]': array(0.01898734), 
'Onset F1 [hist]': array(0.03448276), 
'Onset + offset precision [hist]': array(0.15625), 
'Onset + offset recall [hist]': array(0.01582278), 
'Onset + offset F1 [hist]': array(0.02873563), 
'Onset + velocity precision [hist]': array(0.11458333), 
'Onset + velocity recall [hist]': array(0.01160338), 
'Onset + velocity F1 [hist]': array(0.0210728), 
'Onset + offset + velocity precision [hist]': array(0.10416667), 
'Onset + offset + velocity recall [hist]': array(0.01054852), 
'Onset + offset + velocity F1 [hist]': array(0.01915709), 
'Frame Precision [hist]': array(0.04956897), 
'Frame Recall [hist]': array(0.12630058), 
'Frame F1 [hist]': array(0.07119583), 
'Onset + offset precision (0.01) [hist]': array([0.        , 0.        , 0.01041667]), 
'Onset + offset recall (0.01) [hist]': array([0.        , 0.        , 0.00105485]), 
'Onset + offset F1 (0.01) [hist]': array([0.        , 0.        , 0.00191571]), 
'Onset + offset precision (0.02) [hist]': array([0.     , 0.     , 0.03125]), 
'Onset + offset recall (0.02) [hist]': array([0.        , 0.        , 0.00316456]), 
'Onset + offset F1 (0.02) [hist]': array([0.        , 0.        , 0.00574713]), 
'Onset + offset precision (0.05) [hist]': array([0.00632911, 0.        , 0.15625   ]), 
'Onset + offset recall (0.05) [hist]': array([0.0025    , 0.        , 0.01582278]), 
'Onset + offset F1 (0.05) [hist]': array([0.00358423, 0.        , 0.02873563]), 
'Onset + offset precision (0.1) [hist]': array([0.01265823, 0.        , 0.25      ]), 
'Onset + offset recall (0.1) [hist]': array([0.005     , 0.        , 0.02531646]), 
'Onset + offset F1 (0.1) [hist]': array([0.00716846, 0.        , 0.04597701]), 
'Onset + offset precision (0.2) [hist]': array([0.02531646, 0.        , 0.41666667]), 
'Onset + offset recall (0.2) [hist]': array([0.01      , 0.        , 0.04219409]), 
'Onset + offset F1 (0.2) [hist]': array([0.01433692, 0.        , 0.07662835]), 
'Onset + offset precision (0.5) [hist]': array([0.05696203, 0.16666667, 0.57291667]), 
'Onset + offset recall (0.5) [hist]': array([0.0225    , 0.00775194, 0.05801688]), 
'Onset + offset F1 (0.5) [hist]': array([0.03225806, 0.01481481, 0.10536398]), 

array长度等于本次evaluate处理的曲子数，每首歌有一个结果，
hist是所有歌单独的每个指标，score则是取hist的平均

'pianorolls': [
(array([
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       ...,
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.]
]), array([[0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       ...,
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.]]
)), 

(array([[0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       ...,
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.]]), 
       array([[0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       ...,
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.]])
), 
       
(array([[0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       ...,
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.]]), array([[0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       ...,
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.]]))
]}
